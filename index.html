
<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">
    <title> Zodiac </title>
    <!-- When you type link:css, it will automatically writes this code below -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="zodiac.css"> 

    <h1> <strong>What's my Zodiac </strong> </h1>
    <p id = "question">
        <br> <strong>What Year Were You Born In?</strong><br>
    </p>
    <p id="explain">
        The Korean zodiac is a classification scheme based on the lunar calendar and its origin can be traced back to ancient China.
        <br>
        Check your personality by your zodiac and your Zodiac Compatibilities!
    </p>
    <br>
    <section class="input_area">
        <input id="input" type="text" maxlength="4" pattern="[0-9]" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" style="border:10px solid #3a4ca8"  placeholder="ex) 1998">
        </input>

        <button id="Enter" type="button" class="btn btn-primary"> Enter </button>
    </section>
</head>

<body>
    <!-- count total visitor
    <script language="JavaScript">  
        expireDate = new Date  // 현재의 날짜 객체를 생성 
        expireDate.setMonth(expireDate.getMonth()+3)  // 현재 월에 3개월을 더함. 쿠키의 유효기간 설정.(현재~3개월) 
        hitCt = eval(cookieVal("pageHit"))  // 방문 카운트 변수이며 cookieVal 함수를 실행. 
        hitCt++  // 방문 카운트 +1
        document.cookie = "pageHit="+hitCt+";expires=" + expireDate.toGMTString() // 이곳에서 쿠키를 갱신.   
        function cookieVal(cookieName) {  // cookieVal 함수를 선언함.   
           thisCookie = document.cookie.split("; ")  // 쿠키의 문자열 구조가 '쿠키명=쿠키값; expires=유효기간' 이기 때문에 먼저 세미콜론(;)으로 나눔.(split) 
           for (i=0; i<thisCookie.length; i++) { // ; 으로 나눈 만큼 반복문을 실행. 여기서는 2번을 반복함.   
                if (cookieName == thisCookie[i].split("=")[0]) {  // 먼저 thisCookie[i].split("=")[0]은 '쿠키명=쿠키값' 구조에서 =으로 나눈 배열의 첫번째 값을 지칭함(쿠키명). 
                     return thisCookie[i].split("=")[1]  // thisCookie[i].split("=")[1] 은 =으로 나눈 배열의 두번째 값.(쿠키값) 
               }   
         }   
         return 0   
        }   
    </script>      -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        // get input field
        var input = document.getElementById("input");
        var input_num = $('#input').val(); // unused declared variable

        // Execute a function when the user presses a key on the keyboard
        input.addEventListener("keypress", function(event) {
            // If the user presses the "Enter" key on the keyboard
            if (event.key == "Enter")
            {
                if(input_num=='')
                {
                    alert("Enter a Year");
                }
                // Trigger the button element with a click
                else document.getElementById("Enter").click();
            }
        });

        // get values and open new tab when Enter btn is clicked
        var enter = document.getElementById("Enter");
        enter.addEventListener("click", function(){
            if($('#input').val()==''){
                    alert("Enter the input");
                }
            else {
                counter();
                openCompiler();
            }
        });
        

        // when user click Enter Button, open new html page
        function openCompiler() {
            window.open("result_page_demo.html", "_self");
        }
        // counts and split texts
        function counter(){
            // change the value
            var content = document.getElementById("input").value;
            if (content.length > 4) {
                content = content.substring(0,3);
            }
            document.getElementById('input').value = content;

            // Calculate animal and color
            //// initializing
            const animalList = ["Sheep", "Monkey", "Rooster", "Dog", "Pig", "Rat",  "Cow", "Tiger", "Rabbit", "Dragon", "Snake", "Horse"];
            const colorList = ["White","White", "Black","Black", "Blue","Blue", "Red","Red", "Yellow", "Yellow"];

            const color_TraitsList = [
                // white
                "● Perfectionist inclination<br><br>● You tend to act ahead of words<br><br>● Strong tone, cold temperament can cause problems"
                ,
                // white
                "● Perfectionist inclination<br><br>● You tend to act ahead of words<br><br>● Strong tone, cold temperament can cause problems"
                ,
                // black
                "● Highly adaptable to situations and environments with flexibility<br><br>● You tend to adapt well to the organization, but you get a lot of invisible stress<br><br>● Take good care of your relationships so that you don\'t get overwhelmed by loneliness or depression"
                ,
                // black
                "● Highly adaptable to situations and environments with flexibility<br><br>● You tend to adapt well to the organization, but you get a lot of invisible stress<br><br>● Take good care of your relationships so that you don\'t get overwhelmed by loneliness or depression"
                ,
                // blue
                "● You are kind and comfortable<br><br>● You start well, but you lack perseverance<br><br>● You are often frustrated because you have too much enthusiasm and have a lot of open work"
                ,
                 // blue
                 "● You are kind and comfortable<br><br>● You start well, but you lack perseverance<br><br>● You are often frustrated because you have too much enthusiasm and have a lot of open work"
                ,
                // red
                "● Be popular for one\'s polite and cheerful personality<br><br>● You prefer the obvious and the definite and you dislike the vague<br><br>● You have to be careful because there are times when things go wrong due to your urgent personality and capriciousness"
                ,
                // red
                "● Be popular for one\'s polite and cheerful personality<br><br>● You prefer the obvious and the definite and you dislike the vague<br><br>● You have to be careful because there are times when things go wrong due to your urgent personality and capriciousness"
                ,
                // gold
                "● Full of creativity<br><br>● Reliable, responsible, and honest<br><br>● You should go outside and meet people, not just stay at home"
                ,
                // gold
                "● Full of creativity<br><br>● Reliable, responsible, and honest<br><br>● You should go outside and meet people, not just stay at home"
            ];
            
            const animal_TraitsList = [
                // sheep
                "● You never give up what you\'re determined to do, you\'re stubborn and you have a lot of pride<br><br>● Pacifist, Hate fighting, Polite<br><br>● Thoughtful and compassionate"
                ,
                // monkey
                "● You are independent and can\'t refuse others\'requests, so you step up to the work of others<br><br>● A tendency to be creative and quick-witted but not to finish things well<br><br>● You can do something wrong if you only believe in your skills"
                ,
                // chiken
                "● A tendency to give up difficult tasks easily even though they are understanding and judgmental<br><br>● An upright character with accuracy, systematic, and determination<br><br>● Hard to show one\'s true colors"
                ,
                // dog
                "● The tendency of a once-established relationship to go to the end because of its tenacity and loyalty<br><br>● Passive and indecisive<br><br>● Intelligent and frank"
                ,
                // pig
                "● It symbolizes wealth and good fortune, but beware of laziness<br><br>● Active, loyal, honest and sociable in everything<br><br>● A tendency to be honest and calm but simple"
                ,
                // mouse
                "● Goes well with everything with sociality, honesty and sincerity<br><br>● Highly adaptable and witty<br><br>● Having strong patient"
                ,
                // cow
                "● You are usually gentle, but once you get angry, you are scared<br><br>● Good discipline, good personality, good listener<br><br>● A man of few words and great patience"
                ,
                // tiger
                "● Full of challenging spirit (active tendencies)<br><br>● Aversion to restraint and control<br><br>● A romanticist"
                ,
                // rabbit
                "● A tendency to be unable to do other things when one thing is lost<br><br>● The condition of having many excellent people in everything<br><br>● Gentle and good-natured"
                ,
                // dragon
                "● The state of being hard-nosed and determined but not tactful or manipulative<br><br>● Self-respecting and loathing to lose<br><br>● A sensitive personality"
                ,
                // snake
                "● Quick to judge situations and logical<br><br>● Thoughtful and humorous towards others<br><br>● A strong sense of responsibility"
                ,
                // horse
                "● Tendency to lose by being strong-willed and effective, but taking the initiative first<br><br>● Lively and popular<br><br>● Quick-witted"
            ];

            var year_value = parseInt($('#input').val());

            const animal_idx =(year_value+1)%12;
            const color_idx = (year_value)%10;
            // console.log(`${animal_idx}, ${color_idx}`);

            //// animal and color by itself
            var animal = animalList[animal_idx];
            var color =  colorList[color_idx];
            // console.log(`${animal}, ${color}`);

            //// best animal and best color
            var bestAnimal = animalList[11 - animal_idx];
            var bestColor  = colorList[ (color_idx + 2) % 10];
            // console.log(`${bestAnimal}, ${bestColor}`);
            
            //// worst animal and worst color
            var worstAnimal = animalList[ (animal_idx + 6) % 12];
            var worstColor  = colorList[ (color_idx + 4) % 10];
            // console.log(`${worstAnimal}, ${worstColor}`);
            
            // Traits of color&animal
            var colorTrait = color_TraitsList[color_idx];
            var animalTrait = animal_TraitsList[animal_idx];

            const resultArray = [animal, color, bestAnimal, bestColor, worstAnimal, worstColor, colorTrait, animalTrait];
            console.log(resultArray);
            sessionStorage.setItem("resultArray", JSON.stringify(resultArray));
            // JSON.stringify(resultArray) converts the resultArray into a string which can be stored in sessionStorage

        }   

    </script>
    </body>
    <footer>
        Copyright By Team <strong>BABO</strong>
        <br>
        <div id="visits"> N people visited </div>
        <script>
            function cb(response) {
                var visited_num = response.value;
                document.getElementById('visits').innerText = visited_num + ' people visited!';
            }
        </script>
        <script async src="https://api.countapi.xyz/hit/zodiacjake.netlify.app/visits?callback=cb"></script>
    </footer>
</html>